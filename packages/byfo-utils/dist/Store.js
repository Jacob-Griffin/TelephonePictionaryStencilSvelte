"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TPStore = void 0;
const byfo_themes_1 = require("byfo-themes");
class TPStore {
    changeEvent = (setting, value) => new CustomEvent('tp-settings-changed', { detail: { setting, value } });
    theme = localStorage.getItem('theme') ?? 'classic';
    setTheme = (v) => {
        this.useTheme(v);
        localStorage.setItem('theme', v);
        this.theme = v;
    };
    useTheme = (theme = this.theme) => {
        document.body.setAttribute('class', '');
        const visitedThemes = new Set();
        let currentTheme = theme;
        while (currentTheme && !visitedThemes.has(currentTheme)) {
            visitedThemes.add(currentTheme);
            document.body.classList.add(currentTheme);
            currentTheme = byfo_themes_1.themes[currentTheme].extends;
        }
    };
    alwaysShowAll = !!localStorage.getItem('alwaysShowAll');
    setShowAll = (v) => {
        localStorage.setItem('alwaysShowAll', !v ? '' : 'true');
        this.alwaysShowAll = !!v;
        const e = this.changeEvent('alwaysShowAll', `${!!v}`);
        document.dispatchEvent(e);
    };
    landscapeDismissed = !!sessionStorage.getItem('landscapeDismissed');
    setLandscapeDismissed = (v) => {
        sessionStorage.setItem('landscapeDismissed', !v ? '' : 'true');
        this.landscapeDismissed = true;
        const e = this.changeEvent('landscapeDismissed', `${!!v}`);
        document.dispatchEvent(e);
    };
    username = localStorage.getItem('username');
    setUsername = (v) => {
        if (!v) {
            localStorage.removeItem('username');
            this.username = undefined;
            return;
        }
        localStorage.setItem('username', v);
        this.username = v;
    };
    gameid = localStorage.getItem('game-playing');
    setGameid = (v) => {
        if (!v) {
            localStorage.removeItem('game-playing');
            this.gameid = undefined;
            return;
        }
        localStorage.setItem('game-playing', v);
        this.gameid = v;
    };
    hosting = localStorage.getItem('hosting');
    setHosting = (v) => {
        if (!v) {
            localStorage.removeItem('hosting');
            this.hosting = undefined;
            return;
        }
        localStorage.setItem('hosting', v);
        this.hosting = v;
    };
    rejoinNumber = localStorage.getItem('rejoinNumber');
    setRejoinNumber = (v) => {
        if (!v) {
            localStorage.removeItem('rejoinNumber');
            this.rejoinNumber = undefined;
            return;
        }
        localStorage.setItem('rejoinNumber', v);
        this.rejoinNumber = v;
    };
    searchAs = localStorage.getItem('searchAs');
    setSearchAs = (v) => {
        if (!v) {
            localStorage.removeItem('searchAs');
            this.searchAs = undefined;
            return;
        }
        localStorage.setItem('searchAs', v);
        this.searchAs = v;
    };
    getRejoinData() {
        if (!this.gameid || !this.username)
            return null;
        return {
            gameid: this.gameid,
            name: this.username,
        };
    }
    clearGameData() {
        this.setUsername(undefined);
        this.setGameid(undefined);
        this.setHosting(undefined);
        this.setRejoinNumber(undefined);
    }
}
exports.TPStore = TPStore;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RvcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvU3RvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkNBQXFDO0FBQ3JDLE1BQWEsT0FBTztJQUNsQixXQUFXLEdBQUcsQ0FBQyxPQUFlLEVBQUUsS0FBYSxFQUFFLEVBQUUsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFekgsS0FBSyxHQUFXLFlBQVksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksU0FBUyxDQUFDO0lBQzNELFFBQVEsR0FBRyxDQUFDLENBQVMsRUFBRSxFQUFFO1FBQ3ZCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakIsWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDO0lBRUYsUUFBUSxHQUFHLENBQUMsUUFBZ0IsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFO1FBQ3hDLFFBQVEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN4QyxNQUFNLGFBQWEsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2hDLElBQUksWUFBWSxHQUFHLEtBQUssQ0FBQztRQUN6QixPQUFPLFlBQVksSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQztZQUN4RCxhQUFhLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2hDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMxQyxZQUFZLEdBQUcsb0JBQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxP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